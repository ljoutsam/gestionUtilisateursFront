<div class="recorder">

  <!-- Ã‰tat : Transcription en cours -->
  @if (isTranscribing()) {
    <div class="transcribing" aria-busy="true">
      <p>â³ Transcription en coursâ€¦</p>
    </div>
  } @else {

    <!-- === Boutons Start / Stop === -->
    <div class="controls">
      <!-- Bouton DÃ©marrer -->
      <button
        class="btn-start"
        [disabled]="!canClickStart()"
        (click)="startRecording()">
        ğŸ™ï¸ {{ startLabel() }}
      </button>

      <!-- Bouton ArrÃªter -->
      <button
        class="btn-stop"
        [disabled]="!canClickStop()"
        [ngClass]="{ 'recording-active': isRecording() }"
        (click)="stopRecording()">
        â¹ï¸ ArrÃªter
      </button>
    </div>

    <!-- Indicateur pendant enregistrement -->
    @if (isRecording()) {
      <p class="recording-indicator">ğŸ”´ Enregistrement en coursâ€¦</p>
    }

    <!-- Lecteur quand un audio est prÃªt -->
    @if (audioURL()) {
      <div class="audio-container">
        <audio [src]="audioURL()" controls></audio>
      </div>
    }

    <!-- Bouton envoyer pour transcription -->
    <button
      class="btn-transcribe"
      [disabled]="!canTranscribe()"
      (click)="sendForTranscription()">
      ğŸ“ Transcrire l'audio
    </button>

    <!-- RÃ©sultat + tÃ©lÃ©chargement -->
    @if (transcription()) {
      <div class="result">
        <h3>Transcription :</h3>

        <button
          class="btn-download"
          [disabled]="!canDownloadPDF()"
          (click)="downloadPDF()">
          ğŸ“¥ TÃ©lÃ©charger en PDF
        </button>
      </div>
    }
  }
</div>
